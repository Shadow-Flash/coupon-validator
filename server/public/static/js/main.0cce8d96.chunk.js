(this["webpackJsonpcoupon-validator"]=this["webpackJsonpcoupon-validator"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},,function(e,t,r){},,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var c=r(1),a=r.n(c),n=r(10),s=r.n(n),o=(r(17),r(3)),i=(r(18),r(19),r(2)),l=(r(20),a.a.createContext()),u="addToCart",d="addCoupon",j="switchToCreate",b="serverError",h=r(0);var p=function(e){var t=e.name,r=e.category,c=e.price,n=a.a.useContext(l).dispatch;return Object(h.jsx)("div",{className:"card-border",children:Object(h.jsxs)("div",{className:"card-background",children:[Object(h.jsxs)("div",{className:"left",children:[Object(h.jsx)("h4",{className:"name",children:t}),Object(h.jsx)("p",{className:"category",children:r})]}),Object(h.jsxs)("div",{className:"right",children:[Object(h.jsx)("div",{className:"price",children:c}),Object(h.jsx)("div",{className:"atc-btn",onClick:function(){return e={name:t,category:r,price:c},n(Object(i.a)({type:u},e)),void n({type:b,serverError:""});var e},children:"Add to cart"})]})]})})},m=[{name:"Silk Cloth",category:"Soft",price:1e3},{name:"Cardigan",category:"Soft",price:2e3},{name:"Corset",category:"Hard",price:5e3},{name:"Dungarees",category:"Hard",price:8e3},{name:"Saari",category:"Casual",price:2550},{name:"Jeans",category:"Hard",price:1599},{name:"Shirt",category:"Casual",price:399},{name:"Tops",category:"Casual",price:201}];var O=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{className:"heading",children:"Buy Clothes:"}),Object(h.jsx)("div",{className:"upper-half-display",children:m.map((function(e,t){return Object(h.jsx)(p,{name:e.name,category:e.category,price:e.price},t)}))})]})},x=(r(22),r(11)),v=r(6),f=r(4),g=r.n(f);r(24);var y=function(){var e=a.a.useContext(l),t=e.state,r=e.dispatch,c=a.a.useState(0),n=Object(o.a)(c,2),s=n[0],i=n[1],u=a.a.useState(""),d=Object(o.a)(u,2),p=d[0],m=d[1];function O(e){r({type:b,serverError:e})}return a.a.useEffect((function(){!function(){var e,r=t.cart,c=0,a=Object(x.a)(r);try{for(a.s();!(e=a.n()).done;){c+=e.value.price}}catch(n){a.e(n)}finally{a.f()}i(c)}()}),[t.cart]),Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Checkout:"}),Object(h.jsxs)("p",{children:["Total Items: ",Object(h.jsx)("b",{children:t.cart.length})]}),Object(h.jsxs)("label",{htmlFor:"couponCode",children:["Redeem Coupon: ",Object(h.jsx)("input",{name:"couponCode",type:"text",value:p,onChange:function(e){m(e.target.value)}})," "]}),Object(h.jsxs)("div",{className:"after-applyBtn",children:[Object(h.jsx)("div",{className:"apply-btn",onClick:function(){O(""),fetch("/redeem-coupon",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({couponCode:p,totalAmt:s})}).then(function(){var e=Object(v.a)(g.a.mark((function e(t){var r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(r=e.sent,m(""),t.ok){e.next=9;break}return c=r.message,e.abrupt("return",Promise.reject(c));case 9:i(s-r.data);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){O(e)}))},children:"Apply"}),Object(h.jsx)("p",{className:"p-error",children:t.serverError})]}),Object(h.jsxs)("p",{children:["Total Amount: ",Object(h.jsxs)("b",{children:["\u20b9",s||0]})]}),Object(h.jsx)("div",{className:"coupon-btn",onClick:function(){r({type:j,switchVal:!0})},children:"Create Coupon"})]})},C=r(8),N=(r(25),{typeOfCode:{value:"flat",error:""},code:{value:"",error:""},desc:{value:"",error:""},priceDeduct:{value:"",error:""},sd:{value:"",error:""},ed:{value:"",error:""},minAmt:{value:"",error:""},percentDeduct:{value:"",error:""},maxPercent:{value:"",error:""}});var k=function(){var e=a.a.useContext(l).dispatch,t=a.a.useState(N),r=Object(o.a)(t,2),c=r[0],n=r[1],s=a.a.useState(""),u=Object(o.a)(s,2),b=u[0],p=u[1],m={};function O(t){t.preventDefault(),(Object.entries(c).forEach((function(e){!function(e,t,r){var c=t[0],a=t[1].value,n=RegExp(/^[a-zA-Z0-9]*$/);switch(c){case"typeOfCode":e[c]=["flat","upto"].includes(a)?"":"Not a valid coupon type!";break;case"code":a.length>0?a.length<4?e[c]="Length of code should be greater than 4":a.length>14?e[c]="Length of code should be Less than 14":n.test(a)?e[c]="":e[c]="Please enter a valid code !":e[c]="Length of code should be greater than 4";break;case"desc":e[c]=a.length>100?"Length of description should be less than 100 characters":"";break;case"priceDeduct":e[c]=a<100&&"flat"===r?"Price to be deduct should be greater than 100":"";break;case"sd":e[c]=""===a?"Start date is required":"";break;case"ed":e[c]=""===a?"End date is required":"";break;case"minAmt":e[c]=""===a?"Minimum amount of cart can't be empty":a<=100?"Minimum amount should be greater than 100":"";break;case"percentDeduct":e[c]=(""===a||a<5||a>100)&&"upto"===r?"Percent discount should be greater than 5 and less than 100":"";break;case"maxPercent":e[c]=(""===a||a<500)&&"upto"===r?"Maximum discount amount should be greater than 500":""}}(m,e,c.typeOfCode.value)})),void Object.keys(m).forEach((function(e){var t,r;t=e,r=m[e],n((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(C.a)({},t,Object(i.a)(Object(i.a)({},e[t]),{},{error:r})))}))})),new Promise((function(e,t){Object.values(m).forEach((function(e){""!==e&&t()})),e()}))).then((function(){var t={};Object.entries(c).forEach((function(e){t[e[0]]=e[1].value})),fetch("/create-coupon",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(){var t=Object(v.a)(g.a.mark((function t(r){var c,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.json();case 2:if(c=t.sent,r.ok){t.next=7;break}return a=c.message,console.log(a),t.abrupt("return",Promise.reject(a));case 7:e({type:d}),n(N);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return p(e)}))})).catch((function(){console.log("CANCELLED!!")}))}function x(e){n(Object(i.a)(Object(i.a)({},c),{},Object(C.a)({},e.target.name,Object(i.a)(Object(i.a)({},c[e.target.name]),{},{value:e.target.value}))))}return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Create Coupon:"}),Object(h.jsxs)("form",{onSubmit:function(e){return O(e)},children:[Object(h.jsx)("label",{htmlFor:"typeOfCode",children:"Type of Discount:"}),Object(h.jsxs)("select",{className:"mid-size",name:"typeOfCode",value:c.typeOfCode.value,onChange:x,children:[Object(h.jsx)("option",{value:"flat",children:"Flat"}),Object(h.jsx)("option",{value:"upto",children:"Upto"})]}),c.typeOfCode.error?Object(h.jsx)("p",{className:"error",children:c.typeOfCode.error}):null,Object(h.jsx)("br",{}),Object(h.jsxs)("label",{htmlFor:"code",children:["Coupon Code:",Object(h.jsx)("input",{className:"mid-size",name:"code",type:"text",value:c.code.value,onChange:x}),c.code.error?Object(h.jsx)("p",{className:"error",children:c.code.error}):null]}),Object(h.jsx)("br",{}),Object(h.jsxs)("label",{htmlFor:"desc",children:["Description:",Object(h.jsx)("input",{className:"large-size",name:"desc",type:"text",value:c.desc.value,onChange:x}),c.desc.error?Object(h.jsx)("p",{className:"error",children:c.desc.error}):null]}),Object(h.jsx)("br",{}),"upto"===c.typeOfCode.value?Object(h.jsxs)("label",{htmlFor:"percentDeduct",children:["How much percent discount:",Object(h.jsx)("input",{className:"mid-size",name:"percentDeduct",type:"number",value:c.percentDeduct.value,onChange:x}),c.percentDeduct.error?Object(h.jsx)("p",{className:"error",children:c.percentDeduct.error}):null]}):Object(h.jsxs)("label",{htmlFor:"priceDeduct",children:["Price to deduct:",Object(h.jsx)("input",{className:"mid-size",name:"priceDeduct",type:"number",value:c.priceDeduct.value,onChange:x}),c.priceDeduct.error?Object(h.jsx)("p",{className:"error",children:c.priceDeduct.error}):null]}),Object(h.jsx)("br",{}),Object(h.jsxs)("label",{htmlFor:"sd",children:["Start Date:",Object(h.jsx)("input",{className:"large-size",name:"sd",type:"date",value:c.sd.value,onChange:x}),c.sd.error?Object(h.jsx)("p",{className:"error",children:c.sd.error}):null]}),Object(h.jsx)("br",{}),Object(h.jsxs)("label",{htmlFor:"ed",children:["End Date:",Object(h.jsx)("input",{className:"large-size",name:"ed",type:"date",value:c.ed.value,onChange:x}),c.ed.error?Object(h.jsx)("p",{className:"error",children:c.ed.error}):null]}),Object(h.jsx)("br",{}),Object(h.jsxs)("label",{htmlFor:"minAmt",children:["Minimum amount to apply:",Object(h.jsx)("input",{className:"mid-size",name:"minAmt",type:"number",value:c.minAmt.value,onChange:x}),c.minAmt.error?Object(h.jsx)("p",{className:"error",children:c.minAmt.error}):null]}),Object(h.jsx)("br",{}),"upto"===c.typeOfCode.value?Object(h.jsxs)("label",{htmlFor:"maxPercent",children:["Maximum amount to be discounted:",Object(h.jsx)("input",{className:"mid-size",name:"maxPercent",type:"number",value:c.maxPercent.value,onChange:x}),c.maxPercent.error?Object(h.jsx)("p",{className:"error",children:c.maxPercent.error}):null]}):null,Object(h.jsxs)("div",{className:"buttons",children:[Object(h.jsx)("button",{className:"submit-coupon-btn",children:"Submit"}),Object(h.jsx)("div",{className:"back-btn",onClick:function(){e({type:j,switchVal:!1})},children:"Back"})]}),b?Object(h.jsx)("p",{className:"server-error",children:b}):null]})]})};r(26);var S=function(){var e=a.a.useContext(l).state;return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Cart:"}),Object(h.jsx)("ul",{children:e.cart.map((function(e,t){return Object(h.jsxs)("li",{children:[e.name," - \u20b9",e.price]},t)}))})]})};r(27);var D=function(){var e=a.a.useContext(l).state,t=a.a.useState([]),r=Object(o.a)(t,2),c=r[0],n=r[1],s=a.a.useState(""),i=Object(o.a)(s,2),u=i[0],d=i[1],j=a.a.useState(!1),b=Object(o.a)(j,2),p=b[0],m=b[1];return a.a.useEffect((function(){fetch("/coupon-codes").then(function(){var e=Object(v.a)(g.a.mark((function e(t){var r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(r=e.sent,t.ok){e.next=8;break}return c=r.message,e.abrupt("return",Promise.reject(c));case 8:n(r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return d(e)}))}),[e]),Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"List of Coupons:"}),p?Object(h.jsxs)("ul",{className:"list-of-coupons",children:[c.map((function(e,t){return Object(h.jsxs)("li",{className:"coupon",children:[e.code," ",Object(h.jsxs)("p",{className:"coupon-desc",children:[" -  ",e.desc]})]},t)})),u||null]}):null,Object(h.jsx)("button",{className:"hideAndShow-btn",onClick:function(){m(!p)},children:p?"Hide":"Show"})]})};var w=function(){var e=a.a.useContext(l).state;return Object(h.jsxs)("div",{className:"lower-container",children:[Object(h.jsx)("div",{className:"left-container",children:Object(h.jsx)(S,{})}),Object(h.jsx)("div",{style:{border:"10px solid black"}}),Object(h.jsx)("div",{className:"right-container",children:e.createMode?Object(h.jsx)(k,{}):Object(h.jsx)(y,{})}),Object(h.jsx)("div",{style:{border:"10px solid black"}}),Object(h.jsx)("div",{className:"right-container",children:Object(h.jsx)(D,{})})]})},E=r(12),P={name:"",category:"",price:0,cart:[],couponCount:0,createMode:!1,serverError:""},A=function(e,t){void 0===e&&(e=P);var r=t.name,c=t.category,a=t.price;switch(t.type){case u:return Object(i.a)(Object(i.a)({},e),{},{cart:[].concat(Object(E.a)(e.cart),[{name:r,category:c,price:a}])});case d:return Object(i.a)(Object(i.a)({},e),{},{couponCount:e.couponCount++});case j:return Object(i.a)(Object(i.a)({},e),{},{createMode:t.switchVal});case b:return Object(i.a)(Object(i.a)({},e),{},{serverError:t.serverError});default:return e}};var F=function(){var e=a.a.useReducer(A,P),t=Object(o.a)(e,2),r=t[0],c=t[1];return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(l.Provider,{value:{state:r,dispatch:c},children:[Object(h.jsx)("div",{className:"upper-half",children:Object(h.jsx)(O,{})}),Object(h.jsx)("div",{className:"dividing-border"}),Object(h.jsx)("div",{className:"lower-half",children:Object(h.jsx)(w,{})})]})})};s.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(F,{})}),document.getElementById("root"))}],[[28,1,2]]]);
//# sourceMappingURL=main.0cce8d96.chunk.js.map